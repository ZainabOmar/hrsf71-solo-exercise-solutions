<html>
<head>
  <title>GitHub Fetcher</title>
</head>
<body>

<h2>GitHub Fetcher</h2>
<form class="repo-fetcher">
  <h3>Enter a GitHub username to fetch:</h3>
  <input type="text" name="username" />
  <button type="submit">Fetch User's Repos</button>
</form>

<table class="top-repos"></table>

<script src="https://code.jquery.com/jquery-2.2.0.js"></script>
<script>

// TODO:
//  Respond to the form's `submit` event,
//  fetch from GitHub's API,
//  and send result to POST /repos/import

  function getRepos (user) {
    $.get('https://api.github.com/users/'+user+'/repos', function(data) {
      var cleaned = data.map(function(elem) {
        return {"owner":elem.owner.login, "name": elem.name,"stargazers":elem.stargazers_count};
      });
      console.log(cleaned);
      // $.post('/repos/import', data);
    })
  }

  $('form').submit(function(e){
    var name = $('input').val();
    name.length > 0 ? getRepos(name) : alert('Enter A Valid Username');
    e.preventDefault();
  });


</script>
</body>
</html>
